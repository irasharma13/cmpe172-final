{"ast":null,"code":"import \"source-map-support/register\";\nimport * as ddbLib from \"./lib/ddb-lib\";\nimport { success, failure } from \"./lib/response-objects.js\";\nexport async function main(event, context) {\n  const req_body = JSON.parse(event.body);\n  const table_params = {\n    TableName: process.env.tableName,\n    Key: {\n      userid: event.requestContext.identity.cognitoIdentityId,\n      uploadid: event.pathParameters.id\n    },\n    UpdateExpression: \"SET imageDescription = :imageDescription,  attachment = :attachment\",\n    ExpressionAttributeValues: {\n      \":attachment\": req_body.attachment || null,\n      \":imageDescription\": req_body.imageDescription || null\n    },\n    ReturnValues: \"ALL_NEW\"\n  };\n\n  try {\n    await ddbLib.call(\"update\", table_params);\n    return success({\n      status: true\n    });\n  } catch (e) {\n    console.log(e);\n    return failure({\n      status: false\n    });\n  }\n}","map":{"version":3,"sources":["/Users/Maq0831/Desktop/aws/eos/eos-backend/update.js"],"names":["ddbLib","success","failure","main","event","context","req_body","JSON","parse","body","table_params","TableName","process","env","tableName","Key","userid","requestContext","identity","cognitoIdentityId","uploadid","pathParameters","id","UpdateExpression","ExpressionAttributeValues","attachment","imageDescription","ReturnValues","call","status","e","console","log"],"mappings":";AAAA,OAAO,KAAKA,MAAZ,MAAwB,eAAxB;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,2BAAjC;AAEA,OAAO,eAAeC,IAAf,CAAoBC,KAApB,EAA2BC,OAA3B,EAAoC;AAC1C,QAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWJ,KAAK,CAACK,IAAjB,CAAjB;AACA,QAAMC,YAAY,GAAG;AACpBC,IAAAA,SAAS,EAAEC,OAAO,CAACC,GAAR,CAAYC,SADH;AAEpBC,IAAAA,GAAG,EAAE;AACJC,MAAAA,MAAM,EAAEZ,KAAK,CAACa,cAAN,CAAqBC,QAArB,CAA8BC,iBADlC;AAEJC,MAAAA,QAAQ,EAAEhB,KAAK,CAACiB,cAAN,CAAqBC;AAF3B,KAFe;AAMpBC,IAAAA,gBAAgB,EAAE,qEANE;AAOpBC,IAAAA,yBAAyB,EAAE;AAC1B,qBAAelB,QAAQ,CAACmB,UAAT,IAAuB,IADZ;AAE1B,2BAAqBnB,QAAQ,CAACoB,gBAAT,IAA6B;AAFxB,KAPP;AAWpBC,IAAAA,YAAY,EAAE;AAXM,GAArB;;AAcA,MAAI;AACH,UAAM3B,MAAM,CAAC4B,IAAP,CAAY,QAAZ,EAAsBlB,YAAtB,CAAN;AACA,WAAOT,OAAO,CAAC;AAAC4B,MAAAA,MAAM,EAAE;AAAT,KAAD,CAAd;AACA,GAHD,CAGC,OAAOC,CAAP,EAAU;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACA,WAAO5B,OAAO,CAAC;AAAC2B,MAAAA,MAAM,EAAE;AAAT,KAAD,CAAd;AACA;AACD","sourcesContent":["import * as ddbLib from \"./lib/ddb-lib\";\nimport { success, failure } from \"./lib/response-objects.js\";\n\nexport async function main(event, context) {\n\tconst req_body = JSON.parse(event.body);\n\tconst table_params = {\n\t\tTableName: process.env.tableName,\n\t\tKey: {\n\t\t\tuserid: event.requestContext.identity.cognitoIdentityId,\n\t\t\tuploadid: event.pathParameters.id,\n\t\t},\n\t\tUpdateExpression: \"SET imageDescription = :imageDescription,  attachment = :attachment\",\n\t\tExpressionAttributeValues: {\n\t\t\t\":attachment\": req_body.attachment || null,\n\t\t\t\":imageDescription\": req_body.imageDescription || null\n\t\t},\n\t\tReturnValues: \"ALL_NEW\"\n\t};\n\n\ttry {\n\t\tawait ddbLib.call(\"update\", table_params);\n\t\treturn success({status: true});\n\t}catch (e) {\n\t\tconsole.log(e);\n\t\treturn failure({status: false});\n\t}\n}"]},"metadata":{},"sourceType":"module"}